<html>
	<head>
		<title>InfoVis 2021</title>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js'></script>
		<style></style>
	</head>
	<style>
		body {
			margin: 0px;
		}

		p {
			position: fixed;
			text-align: center;
			width: 100%;
			bottom: 5px;
		}
	</style>
	<body>
		<p>Butterflies SVG made by <a href='https://www.flaticon.com/authors/good-ware' title='Freepik'>Freepik</a> from <a href='https://www.flaticon.com/' title='Flaticon'>www.flaticon.com</a></p>
		<div id='content'></div>
	</body>
	<script src='butterfly.js'></script>
	<script>

		let pressed_keys = []
		var width = (document.body.clientWidth)
		var height = (document.body.clientHeight)

		butterflies = [];

		console.log(width)

		for(let i=0; i<10; i++) {
			//Instantiate the butterfly
			butterflies[i] = new Butterfly(i);

			//Make it fly to a starting random position
			//butterflies[i].moveTo(Math.floor(Math.random()*width), Math.floor(Math.random()*height), 5000+Math.floor(Math.random()*3000));
		}

		function drawCharacter(character) {
			d3.json('characters/'+character+'.json').then(function(data) {

				for(let i=0; i<data.length; i++) {
					butterflies[i].moveTo(data[i].x*width, data[i].y*height)
				}

			}).catch(function(error) {
				console.log(error)
			})
		}

		d3.select('body')
			.on('keyup', function(event) {
				drawCharacter(event.key);
			});

	</script>
</html>